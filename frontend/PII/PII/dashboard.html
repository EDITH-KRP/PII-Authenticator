<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Your secure identity dashboard.">
  <title>Dashboard - PII Authentication</title>
  <link rel="stylesheet" href="styles/styles.css">
  <link rel="stylesheet" href="styles/dashboard.css">
</head>
<body>
  <!-- Header Section -->
  <header class="header">
    <div class="navbar">
      <div class="logo">üîê PII Authentication</div>
      <div class="nav-links">
        <a href="dashboard.html" class="active">Dashboard</a>
        <a href="profile.html">Profile</a>
        <a href="#" id="logoutBtn">Logout</a>
      </div>
    </div>
  </header>

  <!-- Dashboard Section -->
  <section class="dashboard-container">
    <div class="dashboard-header">
      <h1>Welcome, <span id="userName">User</span></h1>
      <p>Manage your secure identity documents</p>
    </div>
    
    <div class="dashboard-stats">
      <div class="stat-card">
        <h3>Documents</h3>
        <p id="documentCount">0</p>
      </div>
      <div class="stat-card">
        <h3>Last Login</h3>
        <p id="lastLogin">Today</p>
      </div>
      <div class="stat-card">
        <h3>Account Status</h3>
        <p id="accountStatus">Active</p>
      </div>
    </div>
    
    <div class="dashboard-main">
      <div class="document-section" style="grid-column: 1 / -1;">
        <div class="section-header">
          <h2>Your Documents</h2>
          <div class="button-group">
            <button id="scanDocBtn" class="btn primary">Scan ID Document</button>
            <button id="uploadDocBtn" class="btn secondary">Upload Document</button>
          </div>
        </div>
        
        <div id="documentList" class="document-list">
          <!-- Document cards will be dynamically inserted here -->
          <div class="empty-state" id="emptyDocState">
            <p>You haven't uploaded any documents yet.</p>
            <div class="button-group">
              <button id="scanDocBtn" class="btn primary">Scan ID Document</button>
              <button id="uploadDocBtn" class="btn secondary">Upload Document</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Document Upload Modal -->
    <div id="uploadModal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Upload Document</h2>
        <form id="documentUploadForm">
          <div class="form-group">
            <label for="docTitle">Document Title</label>
            <input type="text" id="docTitle" name="docTitle" placeholder="Enter document title" required>
          </div>
          
          <div class="form-group">
            <label for="docType">Document Type</label>
            <select id="docType" name="docType" required>
              <option value="">Select document type</option>
              <option value="id">ID Card</option>
              <option value="passport">Passport</option>
              <option value="license">Driver's License</option>
              <option value="certificate">Certificate</option>
              <option value="other">Other</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="docFile">Upload File</label>
            <input type="file" id="docFile" name="docFile" required>
            <p class="form-hint">Supported formats: PDF, JPG, PNG (max 10MB)</p>
          </div>
          
          <button type="submit" class="btn primary full-width upload-btn">Upload Document</button>
        </form>
      </div>
    </div>
    
    <!-- Document Scanning Modal -->
    <div id="scanModal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Scan ID Document</h2>
        <p class="modal-description">Upload an image of your ID document to automatically extract and verify your information.</p>
        
        <form id="scanDocumentForm">
          <div class="form-group">
            <label for="docTypeSelect">Document Type</label>
            <select id="docTypeSelect" name="docTypeSelect" required>
              <option value="">Select document type</option>
              <option value="passport">Passport</option>
              <option value="driver_license">Driver's License</option>
              <option value="national_id">National ID</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="docFileInput">Upload Document Image</label>
            <input type="file" id="docFileInput" name="docFileInput" accept="image/*" required>
            <p class="form-hint">For best results, ensure the document is well-lit and all text is clearly visible. Supported formats: JPG, PNG.</p>
          </div>
          
          <div id="previewContainer" class="preview-container" style="display: none;">
            <h3>Document Preview</h3>
            <img id="previewImage" src="#" alt="Document Preview">
          </div>
          
          <div id="scanningSpinner" class="scanning-container" style="display: none;">
            <div class="spinner"></div>
            <p id="scanningText" class="scanning-text">Scanning document and extracting information...</p>
            <div class="scanning-steps">
              <div class="scanning-step active">
                <div class="step-number">1</div>
                <div class="step-text">Document Analysis</div>
              </div>
              <div class="scanning-step">
                <div class="step-number">2</div>
                <div class="step-text">PII Extraction</div>
              </div>
              <div class="scanning-step">
                <div class="step-number">3</div>
                <div class="step-text">Blockchain Verification</div>
              </div>
            </div>
          </div>
          
          <div id="extractedDataContainer" class="extracted-data-container" style="display: none;">
            <h3>Extracted Information</h3>
            <div class="extracted-data-grid">
              <ul id="extractedDataList" class="extracted-data-list">
                <!-- Extracted data will be inserted here -->
              </ul>
            </div>
          </div>
          
          <div id="tokenResultContainer" class="token-result-container" style="display: none;">
            <h3>Verification Complete</h3>
            <div class="token-result">
              <div class="token-field">
                <strong>Status:</strong> 
                <div class="token-value-container">
                  <span id="verificationStatus">Verified</span>
                  <span class="verification-badge">‚úì</span>
                </div>
              </div>
              <div class="token-field">
                <strong>Document ID:</strong> 
                <div class="token-value-container">
                  <span id="documentId"></span>
                </div>
              </div>
              <div class="token-field">
                <strong>Blockchain TX:</strong> 
                <div class="token-value-container">
                  <a id="txHash" href="#" target="_blank" class="blockchain-link"></a>
                </div>
              </div>
            </div>
            <p class="success-message">Your document has been successfully verified!</p>
          </div>
          
          <button type="submit" id="scanSubmitBtn" class="btn primary full-width scan-btn">Verify Document</button>
        </form>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="social-icons">
      <a href="#"><img src="assets/icons/image f.png" alt="Facebook"></a>
      <a href="#"><img src="assets/icons/image t.png" alt="Twitter"></a>
      <a href="#"><img src="assets/icons/image l.png" alt="LinkedIn"></a>
      <a href="#"><img src="assets/icons/image i.png" alt="Instagram"></a>
    </div>
    <p>&copy; 2025 PII Authentication on Blockchain Networks. All rights reserved.</p>
  </footer>
  
  <!-- JavaScript -->
  <script src="./scripts/logger.js"></script>
  <script src="./scripts/document_scanner.js"></script>

  <script src="./scripts/dashboard.js"></script>
</body>
</html>